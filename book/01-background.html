<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js oranda-dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Background - rsketch</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Documentation for rsketch - A Rust project template with gRPC and multi-language code generation">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">
        <link rel="stylesheet" href="oranda-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "oranda-dark" : "oranda-dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('orandamdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('orandamdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('orandamdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('oranda-dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="01-background.html" class="active"><strong aria-hidden="true">1.</strong> Background</a></li><li class="chapter-item expanded "><a href="02-architecture-overview.html"><strong aria-hidden="true">2.</strong> Architecture Overview</a></li><li class="chapter-item expanded "><a href="03-record-manager.html"><strong aria-hidden="true">3.</strong> Table Manager</a></li><li class="chapter-item expanded "><a href="04-core-storage-components.html"><strong aria-hidden="true">4.</strong> Core Storage Components</a></li><li class="chapter-item expanded "><a href="05-file-system-integration.html"><strong aria-hidden="true">5.</strong> File System Integration</a></li><li class="chapter-item expanded "><a href="06-performance-optimization.html"><strong aria-hidden="true">6.</strong> Performance Optimization</a></li><li class="chapter-item expanded "><a href="07-reliability-and-recovery.html"><strong aria-hidden="true">7.</strong> Reliability and Recovery</a></li><li class="chapter-item expanded "><a href="08-configuration-and-api.html"><strong aria-hidden="true">8.</strong> Configuration and API</a></li><li class="chapter-item expanded "><a href="09-monitoring-and-observability.html"><strong aria-hidden="true">9.</strong> Monitoring and Observability</a></li><li class="chapter-item expanded "><a href="10-deployment-and-operations.html"><strong aria-hidden="true">10.</strong> Deployment and Operations</a></li><li class="chapter-item expanded "><a href="11-security.html"><strong aria-hidden="true">11.</strong> Security</a></li><li class="chapter-item expanded "><a href="12-testing-strategy.html"><strong aria-hidden="true">12.</strong> Testing Strategy</a></li><li class="chapter-item expanded "><a href="13-future-enhancements.html"><strong aria-hidden="true">13.</strong> Future Enhancements</a></li><li class="chapter-item expanded "><a href="14-implementation-roadmap.html"><strong aria-hidden="true">14.</strong> Implementation Roadmap</a></li><li class="chapter-item expanded "><a href="15-distributed-architecture.html"><strong aria-hidden="true">15.</strong> Distributed Architecture</a></li><li class="chapter-item expanded "><a href="16-component-design.html"><strong aria-hidden="true">16.</strong> Component Design</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="oranda-dark">Oranda Dark</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="oranda-light">Oranda Light</button></li>

                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">rsketch</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/crrow/rsketch" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/crrow/rsketch/edit/main/docs/src/01-background.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="background"><a class="header" href="#background">Background</a></h1>
<h2 id="problem-statement"><a class="header" href="#problem-statement">Problem Statement</a></h2>
<p>In cryptocurrency trading systems, the OrderManager component faces significant performance challenges during high-volume market conditions. When market trends trigger rapid price movements, thousands of users can simultaneously submit orders, creating intense database load. Even with traditional solutions like database sharding and horizontal scaling, the system may still experience latency spikes that cause users to miss time-sensitive trading opportunities.</p>
<p>This document analyzes the storage requirements for a high-performance order management system and proposes optimizations to achieve sub-millisecond latency.</p>
<h2 id="requirements-analysis"><a class="header" href="#requirements-analysis">Requirements Analysis</a></h2>
<h3 id="performance-requirements"><a class="header" href="#performance-requirements">Performance Requirements</a></h3>
<ul>
<li><strong>Latency</strong>: Target p99 latency &lt; 10ms for order operations</li>
<li><strong>Throughput</strong>: Support 100,000+ orders per second during peak trading</li>
<li><strong>Availability</strong>: 99.99% uptime with minimal impact from storage operations</li>
</ul>
<h3 id="data-characteristics"><a class="header" href="#data-characteristics">Data Characteristics</a></h3>
<p>The system primarily handles "live order" data with specific access patterns:</p>
<ol>
<li><strong>Write-Heavy Workload</strong>: Orders are frequently inserted as users place new trades</li>
<li><strong>Read-Heavy Queries</strong>: Users continuously query their active orders and market depth</li>
<li><strong>Rare Updates</strong>: Orders are seldom modified (price adjustments, partial cancellations)</li>
<li><strong>Lifecycle Management</strong>: Completed orders are archived to cold storage (e.g., ClickHouse) for analytics</li>
</ol>
<h3 id="consistency-requirements"><a class="header" href="#consistency-requirements">Consistency Requirements</a></h3>
<ul>
<li><strong>Strong Consistency</strong>: Critical for order placement and matching</li>
<li><strong>Eventual Consistency</strong>: Acceptable for non-critical read operations</li>
<li><strong>Durability</strong>: Orders must survive system crashes without data loss</li>
</ul>
<h2 id="current-architecture-limitations"><a class="header" href="#current-architecture-limitations">Current Architecture Limitations</a></h2>
<h3 id="traditional-rdbms-approach-mysql"><a class="header" href="#traditional-rdbms-approach-mysql">Traditional RDBMS Approach (MySQL)</a></h3>
<p>A typical MySQL-based order management system involves multiple I/O operations per transaction:</p>
<ol>
<li><strong>Network Round-trip</strong>: Application â†” MySQL server communication</li>
<li><strong>Transaction Log (binlog)</strong>: Write-ahead logging for durability</li>
<li><strong>Data Pages</strong>: Actual row data writes to storage</li>
<li><strong>Index Updates</strong>: B-tree index maintenance for quick lookups</li>
<li><strong>Replication</strong>: If using master-slave setup for high availability</li>
</ol>
<p><strong>Total I/O Analysis</strong>:</p>
<ul>
<li>1 network operation (typically 0.1-1ms in local datacenter)</li>
<li>2-4 disk operations (1-10ms each on traditional storage)</li>
<li><strong>Result</strong>: 2-40ms total latency per operation</li>
</ul>
<h3 id="embedded-database-approach-rocksdb"><a class="header" href="#embedded-database-approach-rocksdb">Embedded Database Approach (RocksDB)</a></h3>
<p>While embedded databases eliminate network overhead, they still face challenges:</p>
<p><strong>Advantages</strong>:</p>
<ul>
<li>No network latency between application and storage</li>
<li>Optimized LSM-tree structure for write-heavy workloads</li>
<li>Efficient compression and bloom filters</li>
</ul>
<p><strong>Limitations</strong>:</p>
<ul>
<li>Write-Ahead Log (WAL) still requires disk I/O for durability</li>
<li>Cloud block storage adds network latency (EBS, persistent disks)</li>
<li>LSM compaction can cause periodic latency spikes</li>
</ul>
<h2 id="storage-io-analysis"><a class="header" href="#storage-io-analysis">Storage I/O Analysis</a></h2>
<h3 id="disk-storage-performance"><a class="header" href="#disk-storage-performance">Disk Storage Performance</a></h3>
<ul>
<li><strong>Cloud Block Storage (EBS, GCP PD)</strong>: 1-10ms latency</li>
<li><strong>Local NVMe SSDs</strong>: 0.1-1ms latency</li>
<li><strong>Memory</strong>: 50-100 nanoseconds latency</li>
</ul>
<h3 id="the-io-bottleneck"><a class="header" href="#the-io-bottleneck">The I/O Bottleneck</a></h3>
<p>Storage I/O remains the primary performance bottleneck because:</p>
<ol>
<li><strong>Mechanical Limitations</strong>: Even SSDs have microsecond-level latencies</li>
<li><strong>Durability vs. Performance Trade-off</strong>: WAL writes ensure crash recovery but add latency</li>
<li><strong>Cloud Storage Overhead</strong>: Network-attached storage adds round-trip time</li>
</ol>
<h2 id="ç³»ç»Ÿæ¶æ„åˆ†æ"><a class="header" href="#ç³»ç»Ÿæ¶æ„åˆ†æ">ç³»ç»Ÿæ¶æ„åˆ†æ</a></h2>
<h3 id="ä¼ ç»Ÿæ¶æ„çš„æ ¹æœ¬æ€§å±€é™"><a class="header" href="#ä¼ ç»Ÿæ¶æ„çš„æ ¹æœ¬æ€§å±€é™">ä¼ ç»Ÿæ¶æ„çš„æ ¹æœ¬æ€§å±€é™</a></h3>
<p>ä¼ ç»Ÿæ•°æ®åº“æ¶æ„åœ¨äº¤æ˜“ç³»ç»Ÿåœºæ™¯ä¸‹å­˜åœ¨ä»¥ä¸‹æ ¹æœ¬æ€§é—®é¢˜ï¼š</p>
<h4 id="å¤šå±‚æŠ½è±¡å¼€é”€"><a class="header" href="#å¤šå±‚æŠ½è±¡å¼€é”€">å¤šå±‚æŠ½è±¡å¼€é”€</a></h4>
<pre><code>ä¼ ç»Ÿæ•°æ®åº“è¯·æ±‚è·¯å¾„:
åº”ç”¨ç¨‹åº â†’ SQLè§£æ â†’ æŸ¥è¯¢ä¼˜åŒ– â†’ æ‰§è¡Œè®¡åˆ’ â†’ å­˜å‚¨å¼•æ“ â†’ ç¼“å†²æ±  â†’ ç£ç›˜I/O
æ¯ä¸€å±‚éƒ½å¢åŠ å»¶è¿Ÿ: ~500Î¼s + ~200Î¼s + ~300Î¼s + ~100Î¼s + ~50Î¼s + ~2ms = ~3.15ms
</code></pre>
<h4 id="é€šç”¨æ€§-vs-ä¸“ç”¨æ€§æƒè¡¡"><a class="header" href="#é€šç”¨æ€§-vs-ä¸“ç”¨æ€§æƒè¡¡">é€šç”¨æ€§ vs ä¸“ç”¨æ€§æƒè¡¡</a></h4>
<ul>
<li><strong>é€šç”¨æ•°æ®åº“</strong>: è®¾è®¡ä¸ºæ”¯æŒå„ç§å·¥ä½œè´Ÿè½½ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä¸å¤Ÿä¼˜åŒ–</li>
<li><strong>äº¤æ˜“ç³»ç»Ÿéœ€æ±‚</strong>: é«˜åº¦ä¸“é—¨åŒ–çš„æ•°æ®è®¿é—®æ¨¡å¼å’Œæ€§èƒ½è¦æ±‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>: ä¸ºç‰¹å®šå·¥ä½œè´Ÿè½½å®šåˆ¶å­˜å‚¨å¼•æ“</li>
</ul>
<h3 id="æ€§èƒ½ç“¶é¢ˆæ·±åº¦åˆ†æ"><a class="header" href="#æ€§èƒ½ç“¶é¢ˆæ·±åº¦åˆ†æ">æ€§èƒ½ç“¶é¢ˆæ·±åº¦åˆ†æ</a></h3>
<h4 id="å»¶è¿Ÿåˆ†è§£åˆ†æ"><a class="header" href="#å»¶è¿Ÿåˆ†è§£åˆ†æ">å»¶è¿Ÿåˆ†è§£åˆ†æ</a></h4>
<p>é’ˆå¯¹p99 &lt; 10msçš„ç›®æ ‡ï¼Œæˆ‘ä»¬éœ€è¦åˆ†è§£æ¯ä¸ªç»„ä»¶çš„å»¶è¿Ÿè´¡çŒ®ï¼š</p>
<pre><code>ç›®æ ‡å»¶è¿Ÿé¢„ç®—åˆ†é…:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ€»ç›®æ ‡å»¶è¿Ÿ: 10ms (å†…ç½‘ä¼˜åŒ–)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç½‘ç»œä¼ è¾“:     0.1ms (1%)                â”‚
â”‚ æ¥å£å±‚:       0.5ms (5%)                â”‚
â”‚ å­˜å‚¨å¼•æ“:     6ms (60%)                 â”‚
â”‚ æŒä¹…åŒ–å±‚:     0.5ms (5%)                â”‚
â”‚ ç¡¬ä»¶å±‚:       0.4ms (4%)                â”‚
â”‚ ç¼“å†²æ—¶é—´:     2.5ms (25%)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 id="ioå»¶è¿Ÿå±‚æ¬¡åˆ†æ"><a class="header" href="#ioå»¶è¿Ÿå±‚æ¬¡åˆ†æ">I/Oå»¶è¿Ÿå±‚æ¬¡åˆ†æ</a></h4>
<pre><code>å­˜å‚¨ä»‹è´¨å»¶è¿Ÿå¯¹æ¯”:
CPU L1ç¼“å­˜:     ~1ns     (åŸºå‡†)
CPU L2ç¼“å­˜:     ~3ns     (3x)
CPU L3ç¼“å­˜:     ~12ns    (12x)
ç³»ç»Ÿå†…å­˜:       ~100ns   (100x)
æœ¬åœ°NVMe SSD:   ~25Î¼s    (25,000x)
ç½‘ç»œSSD:       ~100Î¼s   (100,000x)
SATA SSD:      ~500Î¼s   (500,000x)
æœºæ¢°ç¡¬ç›˜:      ~10ms    (10,000,000x)
</code></pre>
<h3 id="æ¶æ„è®¾è®¡åŸåˆ™"><a class="header" href="#æ¶æ„è®¾è®¡åŸåˆ™">æ¶æ„è®¾è®¡åŸåˆ™</a></h3>
<h4 id="1-åˆ†å±‚ä¼˜åŒ–ç­–ç•¥"><a class="header" href="#1-åˆ†å±‚ä¼˜åŒ–ç­–ç•¥">1. åˆ†å±‚ä¼˜åŒ–ç­–ç•¥</a></h4>
<pre><code>æ€§èƒ½ä¼˜åŒ–è·¯å¾„å›¾:
é˜¶æ®µ1: æ¶ˆé™¤SQLå±‚ (50ms â†’ 10ms)
  â”œâ”€â”€ ç›´æ¥äºŒè¿›åˆ¶åè®®
  â”œâ”€â”€ é¢„ç¼–è¯‘æŸ¥è¯¢
  â””â”€â”€ è¿æ¥æ± ä¼˜åŒ–

é˜¶æ®µ2: å†…å­˜åŒ–å­˜å‚¨ (10ms â†’ 5ms)
  â”œâ”€â”€ å†…å­˜æ˜ å°„æ–‡ä»¶
  â”œâ”€â”€ é›¶æ‹·è´I/O
  â””â”€â”€ å›ºå®šå¤§å°è®°å½•

é˜¶æ®µ3: ç¡¬ä»¶ä¼˜åŒ– (5ms â†’ 2ms)
  â”œâ”€â”€ CPUç¼“å­˜å¯¹é½
  â”œâ”€â”€ NUMAæ„ŸçŸ¥åˆ†é…
  â””â”€â”€ æ‰¹å¤„ç†æ“ä½œ
</code></pre>
<h4 id="2-ä¸“ç”¨åŒ–è®¾è®¡ç†å¿µ"><a class="header" href="#2-ä¸“ç”¨åŒ–è®¾è®¡ç†å¿µ">2. ä¸“ç”¨åŒ–è®¾è®¡ç†å¿µ</a></h4>
<ul>
<li><strong>å•ä¸€èŒè´£</strong>: æ¯ä¸ªè¡¨ä¸“é—¨å­˜å‚¨ä¸€ç§ä¸šåŠ¡å¯¹è±¡</li>
<li><strong>å›ºå®šç»“æ„</strong>: æ¶ˆé™¤åŠ¨æ€å†…å­˜åˆ†é…å’Œç¢ç‰‡åŒ–</li>
<li><strong>ç±»å‹å®‰å…¨</strong>: ç¼–è¯‘æ—¶ç¡®å®šçš„æ•°æ®ç»“æ„</li>
<li><strong>ç›´æ¥è®¿é—®</strong>: ç»•è¿‡ä¼ ç»Ÿæ•°æ®åº“çš„æŠ½è±¡å±‚</li>
</ul>
<h2 id="è§£å†³æ–¹æ¡ˆæ¶æ„æ¦‚è¿°"><a class="header" href="#è§£å†³æ–¹æ¡ˆæ¶æ„æ¦‚è¿°">è§£å†³æ–¹æ¡ˆæ¶æ„æ¦‚è¿°</a></h2>
<h3 id="æ ¸å¿ƒè®¾è®¡å“²å­¦"><a class="header" href="#æ ¸å¿ƒè®¾è®¡å“²å­¦">æ ¸å¿ƒè®¾è®¡å“²å­¦</a></h3>
<h4 id="memory-firstæ¶æ„"><a class="header" href="#memory-firstæ¶æ„">Memory-Firstæ¶æ„</a></h4>
<ul>
<li><strong>çƒ­æ•°æ®å¸¸é©»å†…å­˜</strong>: æ´»è·ƒäº¤æ˜“æ•°æ®å®Œå…¨å­˜åœ¨RAMä¸­</li>
<li><strong>åˆ†å±‚å­˜å‚¨</strong>: çƒ­/æ¸©/å†·æ•°æ®è‡ªåŠ¨åˆ†å±‚ç®¡ç†</li>
<li><strong>å¼‚æ­¥æŒä¹…åŒ–</strong>: å°†æŒä¹…åŒ–ä»å…³é”®è·¯å¾„ä¸­è§£è€¦</li>
</ul>
<h4 id="ç¡¬ä»¶æ„ŸçŸ¥è®¾è®¡"><a class="header" href="#ç¡¬ä»¶æ„ŸçŸ¥è®¾è®¡">ç¡¬ä»¶æ„ŸçŸ¥è®¾è®¡</a></h4>
<ul>
<li><strong>NUMAæ‹“æ‰‘æ„ŸçŸ¥</strong>: æ•°æ®å’Œè®¡ç®—ç»‘å®šåˆ°ç›¸åŒNUMAèŠ‚ç‚¹</li>
<li><strong>CPUç¼“å­˜å‹å¥½</strong>: æ•°æ®ç»“æ„å¯¹é½åˆ°ç¼“å­˜è¡Œè¾¹ç•Œ</li>
<li><strong>å­˜å‚¨ä»‹è´¨ä¼˜åŒ–</strong>: é’ˆå¯¹NVMe SSDç‰¹æ€§ä¼˜åŒ–I/Oæ¨¡å¼</li>
</ul>
<h4 id="ä¸“ç”¨å­˜å‚¨å¼•æ“"><a class="header" href="#ä¸“ç”¨å­˜å‚¨å¼•æ“">ä¸“ç”¨å­˜å‚¨å¼•æ“</a></h4>
<ul>
<li><strong>è¡¨é©±åŠ¨æ¶æ„</strong>: æ¯ç§ä¸šåŠ¡å¯¹è±¡ä¸€ä¸ªä¸“ç”¨è¡¨</li>
<li><strong>é›¶æŠ½è±¡å¼€é”€</strong>: ç›´æ¥å†…å­˜è®¿é—®ï¼Œæ— åºåˆ—åŒ–</li>
<li><strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong>: åˆ©ç”¨Rusté›¶æˆæœ¬æŠ½è±¡ç‰¹æ€§</li>
</ul>
<h3 id="ç³»ç»Ÿåˆ†å±‚æ¶æ„"><a class="header" href="#ç³»ç»Ÿåˆ†å±‚æ¶æ„">ç³»ç»Ÿåˆ†å±‚æ¶æ„</a></h3>
<pre><code>FileStoreå­˜å‚¨å¼•æ“åˆ†å±‚è®¾è®¡:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ æ¥å£å±‚ (API Gateway Layer)           â”‚
â”‚   - gRPC/HTTPå¤šåè®®æ”¯æŒ                 â”‚
â”‚   - è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°                   â”‚
â”‚   - è®¤è¯æˆæƒå’Œé™æµ                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¼ ä¸šåŠ¡æœåŠ¡å±‚ (Business Service Layer)  â”‚
â”‚   - è®¢å•ç”Ÿå‘½å‘¨æœŸç®¡ç†                     â”‚
â”‚   - ä¸šåŠ¡è§„åˆ™éªŒè¯                         â”‚
â”‚   - äº‹ä»¶å‘å¸ƒå’ŒçŠ¶æ€ç®¡ç†                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ æ•°æ®æœåŠ¡å±‚ (Data Service Layer)      â”‚
â”‚   - è¡¨ç®¡ç†å’ŒæŸ¥è¯¢æ‰§è¡Œ                     â”‚
â”‚   - äº‹åŠ¡åè°ƒå’ŒMVCC                      â”‚
â”‚   - ç´¢å¼•ç®¡ç†å’Œä¼˜åŒ–                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ—ï¸ å­˜å‚¨å¼•æ“å±‚ (Storage Engine Layer)    â”‚
â”‚   - å†…å­˜æ± ç®¡ç†å’Œé¡µé¢åˆ†é…                 â”‚
â”‚   - å¹¶å‘æ§åˆ¶å’Œé”ç®¡ç†                     â”‚
â”‚   - ç‰ˆæœ¬é“¾å’Œåƒåœ¾å›æ”¶                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¾ æŒä¹…åŒ–å±‚ (Persistence Layer)        â”‚
â”‚   - WALå’Œå¿«ç…§ç®¡ç†                       â”‚
â”‚   - å¼‚æ­¥åˆ·ç›˜å’Œæ¢å¤                       â”‚
â”‚   - å¤‡ä»½å’Œå½’æ¡£                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ ç¡¬ä»¶æŠ½è±¡å±‚ (Hardware Layer)          â”‚
â”‚   - NVMeç›´æ¥è®¿é—®                        â”‚
â”‚   - NUMAå†…å­˜ç®¡ç†                        â”‚
â”‚   - CPUç¼“å­˜ä¼˜åŒ–                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 id="å…³é”®æŠ€æœ¯å†³ç­–"><a class="header" href="#å…³é”®æŠ€æœ¯å†³ç­–">å…³é”®æŠ€æœ¯å†³ç­–</a></h3>
<h4 id="1-å†…å­˜æ˜ å°„-vs-ä¼ ç»Ÿio"><a class="header" href="#1-å†…å­˜æ˜ å°„-vs-ä¼ ç»Ÿio">1. å†…å­˜æ˜ å°„ vs ä¼ ç»ŸI/O</a></h4>
<p><strong>é€‰æ‹©</strong>: å†…å­˜æ˜ å°„æ–‡ä»¶ (mmap)
<strong>ç†ç”±</strong>:</p>
<ul>
<li>æ¶ˆé™¤ç”¨æˆ·æ€/å†…æ ¸æ€åˆ‡æ¢å¼€é”€</li>
<li>åˆ©ç”¨OSé¡µé¢ç¼“å­˜æœºåˆ¶</li>
<li>æ”¯æŒé›¶æ‹·è´æ•°æ®è®¿é—®</li>
<li>è‡ªåŠ¨å†…å­˜ç®¡ç†å’Œæ¢é¡µ</li>
</ul>
<h4 id="2-å›ºå®š-vs-å˜é•¿è®°å½•"><a class="header" href="#2-å›ºå®š-vs-å˜é•¿è®°å½•">2. å›ºå®š vs å˜é•¿è®°å½•</a></h4>
<p><strong>é€‰æ‹©</strong>: å›ºå®šå¤§å°è®°å½•
<strong>ç†ç”±</strong>:</p>
<ul>
<li>æ¶ˆé™¤å†…å­˜ç¢ç‰‡åŒ–</li>
<li>O(1)åœ°å€è®¡ç®—</li>
<li>é«˜æ•ˆçš„å†…å­˜é¢„å–</li>
<li>ç®€åŒ–å¹¶å‘æ§åˆ¶</li>
</ul>
<h4 id="3-åŒæ­¥-vs-å¼‚æ­¥æŒä¹…åŒ–"><a class="header" href="#3-åŒæ­¥-vs-å¼‚æ­¥æŒä¹…åŒ–">3. åŒæ­¥ vs å¼‚æ­¥æŒä¹…åŒ–</a></h4>
<p><strong>é€‰æ‹©</strong>: æ··åˆç­–ç•¥
<strong>å…³é”®è·¯å¾„</strong>: åŒæ­¥åˆ°WAL (æœ¬åœ°NVMe, ~500Î¼s)
<strong>æ•°æ®æ–‡ä»¶</strong>: å¼‚æ­¥åˆ·ç›˜ (åå°æ‰¹é‡å†™å…¥)
<strong>å¿«ç…§</strong>: å®šæœŸå¼‚æ­¥å¿«ç…§ (ä¸é˜»å¡ä¸šåŠ¡)</p>
<h2 id="ä¸‹ä¸€æ­¥è®¾è®¡ç»†èŠ‚"><a class="header" href="#ä¸‹ä¸€æ­¥è®¾è®¡ç»†èŠ‚">ä¸‹ä¸€æ­¥è®¾è®¡ç»†èŠ‚</a></h2>
<p>The following sections will detail our approach to building a low-latency, persistent storage system that meets these requirements through:</p>
<ol>
<li><strong>åˆ†å±‚æ¶æ„è®¾è®¡</strong>: è¯¦ç»†çš„ç»„ä»¶èŒè´£åˆ’åˆ†å’Œæ¥å£å®šä¹‰</li>
<li><strong>å­˜å‚¨å¼•æ“æ ¸å¿ƒ</strong>: å†…å­˜ç®¡ç†ã€ç´¢å¼•ç³»ç»Ÿã€å¹¶å‘æ§åˆ¶çš„å…·ä½“å®ç°</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</strong>: ä»ç¡¬ä»¶åˆ°åº”ç”¨å±‚çš„å…¨æ ˆä¼˜åŒ–æ–¹æ¡ˆ</li>
<li><strong>åˆ†å¸ƒå¼ç³»ç»Ÿè€ƒè™‘</strong>: å¯æ‰©å±•æ€§ã€ä¸€è‡´æ€§ã€å®¹é”™æ€§çš„å¹³è¡¡è®¾è®¡</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="02-architecture-overview.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="02-architecture-overview.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
